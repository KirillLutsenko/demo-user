(this["webpackJsonpweather-widget"]=this["webpackJsonpweather-widget"]||[]).push([[0],{26:function(e,t,r){},31:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r(6),c=r.n(n),i=r(3),s=r(13),u=r(4),o=r(2),l="WEATHER_START_FETCHING",d="WEATHER_STOP_FETCHING",p="WEATHER_FILL",m="WEATHER_SET_FETCHING_ERROR",h="WEATHER_SET_MIN_TEMPERATURE",b="WEATHER_SET_MAX_TEMPERATURE",j="WEATHER_SET_TYPE_OF_WEATHER",y="WEATHER_SET_MINTEMPVALID_ERROR",f="WEATHER_SET_MAXTEMPVALID_ERROR",T="WEATHER_SET_STATUS_OF_FILTER",x={data:null,isFetching:!1,error:null,weatherType:"sunny",minTemperature:"",maxTemperature:"",minTempValidError:!1,maxTempValidError:!1,filterStatus:!1},O=Object.freeze({WEATHER_SET_ACTIVE_DAY:"WEATHER_SET_ACTIVE_DAY"}),E={activeId:0},_=Object(u.b)({weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!0});case d:return Object(o.a)(Object(o.a)({},e),{},{isFetching:!1});case m:return Object(o.a)(Object(o.a)({},e),{},{error:t.payload,data:null});case p:return Object(o.a)(Object(o.a)({},e),{},{data:t.payload,error:null});case j:return Object(o.a)(Object(o.a)({},e),{},{weatherType:t.payload});case h:return Object(o.a)(Object(o.a)({},e),{},{minTemperature:t.payload});case b:return Object(o.a)(Object(o.a)({},e),{},{maxTemperature:t.payload});case y:return Object(o.a)(Object(o.a)({},e),{},{minTempValidError:t.payload});case f:return Object(o.a)(Object(o.a)({},e),{},{maxTempValidError:t.payload});case T:return Object(o.a)(Object(o.a)({},e),{},{filterStatus:t.payload});default:return e}},weatherDayId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.WEATHER_SET_ACTIVE_DAY:return{activeId:t.payload};default:return e}}}),g=r(11),v=r(12),N=(Object(g.createLogger)({duration:!0,collapsed:!0,colors:{title:function(e){return e.error?"firebrick":"deepskyblue"},prevState:function(){return"#1C5FAF"},action:function(){return"#149945"},nextState:function(){return"#A47104"},error:function(){return"#FF0005"}}}),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,u.c),A=[v.a];var F=Object(u.d)(_,N(u.a.apply(void 0,Object(s.a)(A)))),R=r(5),k=r.n(R),S=r(7),w=Object.freeze({weather:{fetch:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return fetch("".concat("https://lab.lectrum.io/rtx/api/","/forecast"),{method:"GET"})}))}}),M=Object.freeze({startFetching:function(){return{type:l}},stopFetching:function(){return{type:d}},fill:function(e){return{type:p,payload:e}},setFetchingError:function(e){return{type:m,error:!0,payload:e}},fetchAsync:function(){return function(){var e=Object(S.a)(k.a.mark((function e(t){var r,a,n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(M.startFetching()),e.next=3,w.weather.fetch();case 3:if(200!==(r=e.sent).status){e.next=12;break}return e.next=7,r.json();case 7:a=e.sent,n=a.data,t(M.fill(n)),e.next=14;break;case 12:c={status:r.status},t(M.setFetchingError(c));case 14:t(M.stopFetching());case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},setMinTemperature:function(e){return{type:h,payload:e}},setMaxTemperature:function(e){return{type:b,payload:e}},setTypeOfWeather:function(e){return{type:j,payload:e}},setMinTempValidationError:function(e){return{type:y,payload:e}},setMaxTempValidationError:function(e){return{type:f,payload:e}},setFilterStatus:function(e){return{type:T,payload:e}}}),I=Object.freeze({setUserId:function(e){return{type:O.WEATHER_SET_ACTIVE_DAY,payload:e}}}),V=(r(26),r(1)),C=r(28),W=r(29),H=function(){var e=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.weather})),r=t.data,n=t.isFetching,c=t.error,s=t.minTemperature,u=t.maxTemperature,o=t.weatherType,l=t.minTempValidError,d=t.maxTempValidError,p=t.filterStatus;Object(a.useEffect)((function(){e(M.fetchAsync())}),[e]);var m=function(){var t=Object(S.a)(k.a.mark((function t(){var a;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==s||""!==u){t.next=5;break}e(M.setMinTempValidationError(!0)),e(M.setMaxTempValidationError(!0)),t.next=18;break;case 5:if(""!==s){t.next=9;break}e(M.setMinTempValidationError(!0)),t.next=18;break;case 9:if(""!==u){t.next=13;break}e(M.setMaxTempValidationError(!0)),t.next=18;break;case 13:return t.next=15,e(M.fetchAsync());case 15:a=r.filter((function(e){return e.type===o&&e.temperature>=s&&e.temperature<=u})),e(M.fill(a)),e(M.setFilterStatus(!0));case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{data:r,isFetching:n,error:c,minTemperature:s,maxTemperature:u,weatherType:o,minTempValidError:l,maxTempValidError:d,filterStatus:p,minTemperatureChange:function(t){var r=t.target.value.replace(/[^\d.]/g,"");e(M.setMinTempValidationError(!1)),e(M.setMinTemperature(r))},maxTemperatureChange:function(t){var r=t.target.value.replace(/[^\d.]/g,"");e(M.setMaxTempValidationError(!1)),e(M.setMaxTemperature(r))},setWeatherType:function(t){return e(M.setTypeOfWeather(t))},filterWeather:m,resetFilters:function(){e(M.fetchAsync()),e(M.setMinTemperature("")),e(M.setMaxTemperature("")),e(M.setTypeOfWeather("sunny")),e(M.setFilterStatus(!1))}}}(),t=e.isFetching,r=e.data,n=e.error,c=e.minTemperature,s=e.maxTemperature,u=e.weatherType,o=e.minTempValidError,l=e.maxTempValidError,d=e.filterStatus,p=e.filterWeather,m=e.minTemperatureChange,h=e.maxTemperatureChange,b=e.setWeatherType,j=e.resetFilters,y=function(){var e=Object(i.b)();return{dayId:Object(i.c)((function(e){return e.weatherDayId.activeId})),useDayId:function(t){return e(I.setUserId(t))}}}(),f=y.dayId,T=y.useDayId;if(n&&404===n.status)return Object(V.jsx)("p",{className:"error",children:"Sorry, weather forecast is not found"});if(n&&404!==n.status)return Object(V.jsx)("p",{className:"error",children:"Sorry, something went wrong"});if(!t&&r&&0===r.length)return Object(V.jsxs)("div",{className:"error",children:[Object(V.jsx)("p",{children:"By given criteria no days available"}),Object(V.jsx)("button",{type:"button",onClick:j,className:"reset-button",children:"Reset filters"})]});var x,O=function(e){return r&&r.length&&r[e].temperature};return Object(V.jsxs)("div",{className:"weather-widget",children:[t&&Object(V.jsx)("p",{className:"error",children:"Loading data from api"}),Object(V.jsxs)("main",{children:[Object(V.jsxs)("div",{className:"filter",children:[Object(V.jsxs)("label",{className:"filter__label",htmlFor:"cloudy",children:[Object(V.jsx)("span",{className:C("checkbox",{"checkbox checkbox-selected":"cloudy"===u}),children:"Cloudy"}),Object(V.jsx)("input",{type:"radio",id:"cloudy",name:"filter",className:"radio-checkbox",onChange:function(){return b("cloudy")},checked:"cloudy"===u})]}),Object(V.jsxs)("label",{className:"filter__label",htmlFor:"sunny",children:[Object(V.jsx)("span",{className:C("checkbox",{"checkbox checkbox-selected":"sunny"===u}),children:"Sunny"}),Object(V.jsx)("input",{type:"radio",id:"sunny",name:"filter",className:"radio-checkbox",onChange:function(){return b("sunny")},checked:"sunny"===u})]}),Object(V.jsxs)("label",{className:"filter__label",htmlFor:"rainy",children:[Object(V.jsx)("span",{className:C("checkbox",{"checkbox checkbox-selected":"rainy"===u}),children:"Rainy"}),Object(V.jsx)("input",{type:"radio",id:"rainy",name:"filter",className:"radio-checkbox",onChange:function(){return b("rainy")},checked:"rainy"===u})]}),Object(V.jsxs)("div",{className:"custom-input",children:[Object(V.jsx)("label",{htmlFor:"min-temperature",children:"Minimum temperature"}),Object(V.jsx)("input",{id:"min-temperature",type:"text",value:c,onChange:m}),o&&Object(V.jsx)("p",{className:"validation-error",children:"Enter temperature"})]}),Object(V.jsxs)("div",{className:"custom-input",children:[Object(V.jsx)("label",{htmlFor:"min-temperature",children:"Maximum temperature"}),Object(V.jsx)("input",{id:"max-temperature",type:"text",value:s,onChange:h}),l&&Object(V.jsx)("p",{className:"validation-error",children:"Enter temperature"})]}),d?Object(V.jsx)("button",{type:"button",onClick:j,className:"button",children:"Reset filters"}):Object(V.jsx)("button",{type:"button",onClick:p,className:"button",children:"Filter"})]}),Object(V.jsxs)("div",{className:"head",children:[Object(V.jsx)("div",{className:r&&r.length&&C("icon",{"icon sunny":"sunny"===r[f].type,"icon cloudy":"cloudy"===r[f].type,"icon rainy":"rainy"===r[f].type})}),Object(V.jsxs)("div",{className:"current-date",children:[Object(V.jsx)("p",{children:!t&&r&&r.length&&W(r[f].day).format("dddd")}),Object(V.jsx)("span",{children:!t&&r&&r.length&&W(r[f].day).format("MMMM do")})]})]}),Object(V.jsxs)("div",{className:"current-weather",children:[Object(V.jsx)("p",{className:"temperature",children:!t&&O(f)}),Object(V.jsxs)("p",{className:"meta",children:[Object(V.jsx)("span",{className:"rainy",children:"%".concat(!t&&(x=f,r&&r.length&&r[x].rain_probability))}),Object(V.jsx)("span",{className:"humidity",children:"%".concat(!t&&function(e){return r&&r.length&&r[e].humidity}(f))})]})]}),Object(V.jsx)("div",{className:"forecast",children:!t&&r&&r.length&&r.slice(0,7).map((function(e,t){return Object(V.jsxs)("div",{onClick:function(){return T(t)},onKeyDown:function(){return T(t)},tabIndex:0,role:"button",className:C("day",{"day selected":t===f,"day sunny":"sunny"===e.type,"day cloudy":"cloudy"===e.type,"day rainy":"rainy"===e.type}),children:[Object(V.jsx)("p",{children:W(e.day).format("dddd")}),Object(V.jsx)("span",{children:O(t)})]},e.id)}))})]})]})};c.a.render(Object(V.jsx)(i.a,{store:F,children:Object(V.jsx)(H,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.3ced68e9.chunk.js.map